sudo: required
dist: trusty
language: cpp
compiler:
  - gcc
  - clang
before_install:
  - sudo apt-add-repository -y ppa:beineri/opt-qt542-trusty
  - sudo apt-get update -qq
  - sudo apt-get install -qq qt54base
  - source /opt/qt54/bin/qt54-env.sh
  - git submodule update --init --recursive
  - git clone --depth 1 git://github.com/communi/libcommuni.git
  - cd libcommuni && qmake -config no_tests -config no_examples && make && sudo make install && cd ..
cache: apt
script:
  - nproc
  - qmake -v
  - qmake 
  - make -j$(nproc)
notifications:
  email: false
  irc:
    channels:
      - "irc.freenode.org#communi"
    template:
      - "%{repository}#%{build_number} (%{branch} - %{commit} : %{author}): %{message} - %{build_url}"
    skip_join: true
